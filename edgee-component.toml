manifest-version = 1

[component]
name = "Google Analytics"
version = "1.2.0"
category = "data-collection"
subcategory = "analytics"
description = """
## Overview

The **Google Analytics** component by Edgee enables seamless integration of Google Analytics 4 (GA4) into your application at the edge.
By deploying this component, you can collect and forward analytics data while respecting user privacy settings, eliminating the need to load the GA4 script on your website.

---

## Key Features & Benefits

### Features

- **Edge Deployment**: Run analytics at the edge for improved performance and reduced latency.
- **Privacy Compliance**: Respect user consent preferences by managing data collection at the edge.
- **Configurable Consent Mapping**: Customize how Edgee consent states map to Google Analytics consent mode parameters.
- **E-commerce Support**: Track standard GA4 e-commerce events such as `view_item`, `add_to_cart`, and `purchase`.
- **Data Layer Integration**: Easily integrate with the Edgee Data Layer to capture events.
- **Custom Parameters**: Define product-scoped custom parameters for enhanced tracking.

### Benefits

- **Enhanced Performance**: Reduce client-side load by processing analytics at the edge.
- **Improved Privacy**: Ensure compliance with data protection regulations by managing data collection at the edge.
- **Seamless Integration**: Easily integrate with existing Edgee projects and workflows.
- **Comprehensive Tracking**: Capture a wide range of user interactions and e-commerce events.

---

## Use Cases

- **E-commerce Platforms**: Track user interactions and optimize conversion funnels.
- **Media & Publishing**: Analyze audience engagement and content performance.
- **Financial Services**: Monitor user journeys and personalize offerings.

---

Additional resources: [Google Analytics Documentation](https://support.google.com/analytics)
"""
documentation = "https://www.edgee.cloud/docs/components/data-collection/google-analytics"
repository = "https://github.com/edgee-cloud/ga-component"
wit-version = "1.0.0"
icon-path = "google_analytics.png"
language = "Rust"

[component.build]
command = "cargo build --target wasm32-wasip2 --release && rm -f ga.wasm && cp ./target/wasm32-wasip2/release/ga_component.wasm ga.wasm"
output_path = "ga.wasm"

[component.settings.ga_measurement_id]
title = "Measurement ID"
type = "string"
required = true
description = """
The measurement ID for your Google Analytics property"""

[component.settings.consent_mapping_pending]
title = "GA4 Consent Mode Mapping - Pending"
type = "string"
required = false
options = ["analytics_only", "full_consent", "no_consent"]
description = """
How to map Edgee 'pending' consent to Google Analytics consent mode. Default is 'analytics_only'."""

[component.settings.consent_mapping_denied]
title = "GA4 Consent Mode Mapping - Denied"
type = "string"
required = false
options = ["analytics_only", "full_consent", "no_consent"]
description = """
How to map Edgee 'denied' consent to Google Analytics consent mode. Default is 'no_consent'."""

[component.settings.consent_mapping_granted]
title = "GA4 Consent Mode Mapping - Granted"
type = "string"
required = false
options = ["analytics_only", "full_consent", "no_consent"]
description = """
How to map Edgee 'granted' consent to Google Analytics consent mode. Default is 'full_consent'."""
